# .windsurfrules â€” egos-lab Monorepo
# VERSION 1.0.0 â€” Initialized 2026-02-13
# Sacred Code: 000.111.369.963.1618
# Heritage: carteira-livre governance v4.0

---
project: "egos-lab"
type: "monorepo-lab"
parent: "carteira-livre"
---

## ðŸ“‹ SSOT (Single Source of Truth)

> **5 arquivos governam tudo. NÃ£o crie novos docs â€” atualize estes.**

| Arquivo | PropÃ³sito | MAX linhas |
|---------|-----------|------------|
| `AGENTS.md` | Config do projeto, stack, commands | 200 |
| `TASKS.md` | Todas as tasks (SSOT) | 300 |
| `.windsurfrules` | Regras do agente (este arquivo) | 300 |
| `.guarani/PREFERENCES.md` | PadrÃµes de cÃ³digo | 150 |
| `.guarani/IDENTITY.md` | Identidade do agente | 100 |

## âš¡ PRIME DIRECTIVE

> **NEVER write manual logic if a Tool (MCP) exists.**
> **NEVER build UI without Google Stitch design first.**
> **NEVER mix egos-lab code with carteira-livre.**

## ðŸŽ¯ MANDAMENTOS

1. **Cada ideia = um app** em `apps/`. NUNCA misturar.
2. **Shared code** vai em `packages/shared/`. Zero duplicaÃ§Ã£o.
3. **API-first** â€” tudo deve ser callable por agentes (MCP-ready).
4. **Cost tracking** â€” todo uso de AI logado com custo em USD.
5. **Stitch-first** â€” UI designs VÃƒO para Google Stitch antes do cÃ³digo.
6. **Idea ingestion** â€” rodar `npm run scan:ideas` antes de commits.

## ðŸŽ¨ DESIGN STANDARD: GOOGLE STITCH

```
WORKFLOW OBRIGATÃ“RIO:
1. Escrever prompt de design â†’ docs/stitch/[feature].md
2. Gerar design no Google Stitch â†’ exportar mockup
3. Implementar cÃ³digo -> matching pixel-perfect com design
4. NUNCA construir dashboard/UI direto sem Stitch mockup
```

Quando agente precisar criar UI:
- Gere o PROMPT para Stitch, nÃ£o o cÃ³digo
- Salve em `docs/stitch/[feature].md`
- Diga ao usuÃ¡rio: "Design pronto para Stitch, gere lÃ¡ e volte com o resultado"

## ðŸ“¥ IDEA INGESTION

```
SOURCE: /home/enio/Downloads/compiladochats/
SCRIPT: scripts/scan_ideas.ts
TRIGGER: pre-commit hook OU manual (npm run scan:ideas)

REGRAS:
- SÃ³ processa .md (ChatGPT-*, Gemini-*, Claude-*)
- Ignora: .pdf, .zip, .csv, .xlsx, .jnlp, .txt
- Hash de cada arquivo para evitar duplicatas
- Classifica: business_idea | personal | noise
- Copia business_ideas â†’ docs/plans/
```

## ðŸ”— CROSS-REPO RULES

| Repo | O que FAZ | O que NÃƒO FAZ |
|------|-----------|----------------|
| `carteira-livre` | SaaS em produÃ§Ã£o | Experimentos |
| `egos-lab` | ProtÃ³tipos MVP | Deploy para produÃ§Ã£o |
| `EGOSv5` | Arquivado | NADA (legacy) |

## ðŸ“Š METRICS

| MÃ©trica | Target |
|---------|--------|
| Max file size | 400 LOC |
| API cost/month | < $10 |
| Test coverage | > 60% (apps) |
| Idea scan freq | Every commit |

## ðŸ§  AI MEMORY SYNC

Para garantir que agentes (Antigravity + Windsurf) compartilhem contexto:

1. **AGENTS.md** Ã© lido por AMBOS os agentes no startup
2. **TASKS.md** Ã© a SSOT de progresso â€” sempre atualizar
3. **Commits descritivos** â€” cada commit explica o "porquÃª" para o outro agente
4. **Handoffs** â€” usar `docs/_current_handoffs/` quando trocar de agente
5. **compiladochats** â€” scanear antes de cada sessÃ£o nova

## ðŸ”‘ ENV VARS

```env
OPENROUTER_API_KEY=   # AI analysis (Gemini via OpenRouter)
# NOT needed for MVP: SUPABASE_URL, SUPABASE_KEY (Phase 2+)
```
